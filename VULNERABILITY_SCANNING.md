# Endor Labs Vulnerability Scanning

This repository is configured to run vulnerability scans using Endor Labs.

## Overview

Endor Labs provides comprehensive security scanning for:
- **Dependency vulnerabilities**: Scans all Maven dependencies for known security issues
- **Secret scanning**: Detects exposed credentials and secrets in code
- **Code vulnerabilities**: Identifies security issues in the codebase

## Running Scans

### Automated Scans via GitHub Actions

The repository includes a GitHub Actions workflow that automatically runs vulnerability scans:

- **Workflow**: `.github/workflows/endor-vulnerability-scan.yml`
- **Triggers**: 
  - On push to main/master branches
  - On pull requests
  - Manual trigger via workflow_dispatch

### Manual Scans

To run a scan manually on your local machine:

1. Ensure you have the `endorctl` CLI tool installed
2. Set up authentication:
   ```bash
   export ENDOR_API_KEY="your-api-key"
   export ENDOR_API_SECRET="your-api-secret"
   export ENDOR_NAMESPACE="your-namespace"
   ```
3. Run the scan script:
   ```bash
   ./scan-vulnerabilities.sh
   ```

Or run endorctl directly:
```bash
./endorctl scan \
  --path=. \
  --dependencies \
  --secrets \
  --languages=java \
  --output-type=summary
```

## Scan Types

The vulnerability scan includes:

- **Dependencies**: Scans all Maven dependencies defined in `pom.xml`
- **Secrets**: Scans for exposed credentials, API keys, and sensitive data
- **Languages**: Focuses on Java code analysis

## Configuration

### Required Secrets

For GitHub Actions to work, configure these secrets in your repository:
- `ENDOR_API_KEY`: Your Endor Labs API key
- `ENDOR_API_SECRET`: Your Endor Labs API secret
- `ENDOR_NAMESPACE`: Your Endor Labs namespace

### Files

- `scan-vulnerabilities.sh`: Shell script for running scans
- `.github/workflows/endor-vulnerability-scan.yml`: GitHub Actions workflow
- `.gitignore`: Configured to exclude the endorctl binary

## Viewing Results

Scan results are available in multiple formats:
- Summary output in the console
- SARIF files for integration with GitHub Security tab
- JSON format for programmatic access
- Detailed reports in the Endor Labs web interface

## Additional Resources

- [Endor Labs Documentation](https://docs.endorlabs.com/)
- [endorctl CLI Reference](https://docs.endorlabs.com/endorctl/)
